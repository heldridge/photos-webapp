{% extends 'base.html.j2' %}

{% load static %}

{% block content %}

{% if messages %}
<div class="flex justify-center z-10">
    <ul class="messages absolute z-10">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<div class="flex justify-center w-full pt-5">
    <div class="flex flex-col w-4/5 max-w-7xl items-center">   
        {% if user.is_authenticated %}
        <p class="opacity-high-emphasis text-4xl">
            Settings
        </p>

        <div class="w-3/4 mt-3">
            <div class="flex items-center">
                <span class="text-2xl opacity-high-emphasis w-3/12">Email:</span>
                <div class="w-9/12 flex flex-row-reverse text-2xl">{{ user.email }} </div>
            </div>

            <form method="post" class="w-full mt-3">
            {% csrf_token %}       
            {% if form.non_field_errors %}
                <div class='mb-3 text-error'>
                    <ul>
                    {% for error in form.non_field_errors %}
                        <li> {{ error| escape }}</li>
                    {% endfor %}
                    </ul>
                </div>
            {% endif %}
                <div class="flex items-center relative">
                    <span class="text-2xl opacity-high-emphasis w-3/12">{{ form.display_name.label_tag }}</span>
                    <div class="w-9/12 flex flex-row-reverse">{{ form.display_name }} </div>

                    <button type="submit" class="absolute right-28n text-lg rounded py-2 px-4 bg-primary hover:bg-primary-hover text-black">Update</button>
                </div>
            </form>
        </div>

        {% else %}
        <p class="opacity-high-emphasis text-4xl">
            Log in to view your settings page
        </p>

        <a href="{% url 'login' %}" class="bg-primary hover:bg-primary-hover rounded text-black px-3 py-2 text-black opacity-high-emphasis text-2xl flex items-center mt-4">
            Login
        </a>
        {% endif %}
    </div>
</div>

<script type="text/javascript" src="{% static 'js/basic.js' %}"></script>
{% endblock %}